import{r as e,j as s,U as t,z as r,J as a,T as n,K as i,N as o,O as c,Q as l,V as d,D as m,h as u}from"./react-vendor-Z_4RhRe6.js";import{g as p,f}from"./hooks-Bg0oNxwz.js";import{m as h,A as g}from"./motion-Bk-wstwu.js";import"./vendor-Dr3LqIF9.js";import"./utils-B30PI53b.js";import"./theme-core-CFJN5RsB.js";const x=()=>{const{themePreferences:x,animationPreferences:b,uiPreferences:y,updateThemePreferences:w,updateAnimationPreferences:N,updateUIPreferences:j,resetPreferences:P,exportPreferences:v,importPreferences:E,error:T}=p();f();const[k,S]=e.useState([]),[C,A]=e.useState(!1),[U,R]=e.useState(""),[$,I]=e.useState(""),[M,O]=e.useState(!1),[Y,J]=e.useState(null),F=e=>{S(s=>[...s,{...e,timestamp:(new Date).toLocaleTimeString()}])};e.useEffect(()=>{Y||J({theme:{...x},animation:{...b},ui:{...y}})},[x,b,y,Y]);const D=e=>{switch(e){case"passed":return s.jsx(u,{className:"w-4 h-4 text-green-500"});case"failed":return s.jsx(m,{className:"w-4 h-4 text-red-500"});case"running":return s.jsx(r,{className:"w-4 h-4 text-yellow-500 animate-spin"});default:return null}};return s.jsx("div",{className:"min-h-screen p-6 transition-colors duration-300",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(h.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"User Preferences Test Suite"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Comprehensive testing for user preference management and import/export functionality"}),T&&s.jsx("div",{className:"mt-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg",children:s.jsxs("p",{className:"text-red-700 dark:text-red-300",children:["Error: ",T]})})]}),s.jsxs(h.div,{className:"mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg transition-colors duration-300",layout:!0,children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx(t,{className:"w-5 h-5"}),"Current Preferences"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Theme Preferences"}),s.jsxs("ul",{className:"text-sm space-y-1",children:[s.jsxs("li",{children:["Theme: ",s.jsx("strong",{children:x.theme})]}),s.jsxs("li",{children:["Animations Enabled: ",s.jsx("strong",{children:x.animationsEnabled?"Yes":"No"})]}),s.jsxs("li",{children:["Reduced Motion: ",s.jsx("strong",{children:x.reducedMotion?"Yes":"No"})]})]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Animation Preferences"}),s.jsxs("ul",{className:"text-sm space-y-1",children:[s.jsxs("li",{children:["Global Animations: ",s.jsx("strong",{children:b.globalAnimationsEnabled?"Yes":"No"})]}),s.jsxs("li",{children:["Respect Reduced Motion: ",s.jsx("strong",{children:b.respectReducedMotion?"Yes":"No"})]}),s.jsxs("li",{children:["Theme Transition Duration: ",s.jsxs("strong",{children:[b.themeTransition.duration,"ms"]})]})]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Accessibility Preferences"}),s.jsxs("ul",{className:"text-sm space-y-1",children:[s.jsxs("li",{children:["High Contrast: ",s.jsx("strong",{children:y.accessibility.highContrast?"Yes":"No"})]}),s.jsxs("li",{children:["Reduced Motion: ",s.jsx("strong",{children:y.accessibility.reducedMotion?"Yes":"No"})]}),s.jsxs("li",{children:["Screen Reader: ",s.jsx("strong",{children:y.accessibility.screenReader?"Yes":"No"})]})]})]})]})]}),s.jsxs(h.div,{className:"mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg transition-colors duration-300",layout:!0,children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Controls"}),s.jsxs("div",{className:"flex flex-wrap gap-4",children:[s.jsxs("button",{onClick:async()=>{A(!0),S([]),F({testName:"Test Suite Started",status:"passed",duration:0,details:"Starting comprehensive user preferences tests"});try{await(async()=>{F({testName:"Theme Preferences Update",status:"running",duration:0,details:"Testing theme preferences modification"});const e=performance.now(),s=x.theme;try{const t="light"===s?"dark":"light";w({theme:t}),await new Promise(e=>setTimeout(e,100));const r=x.theme===t;F({testName:"Theme Preferences Update",status:r?"passed":"failed",duration:performance.now()-e,details:r?`Successfully updated theme from ${s} to ${t}`:"Failed to update theme preference"}),w({theme:s})}catch(t){F({testName:"Theme Preferences Update",status:"failed",duration:performance.now()-e,details:`Error updating theme preferences: ${t instanceof Error?t.message:"Unknown error"}`})}})(),await new Promise(e=>setTimeout(e,200)),await(async()=>{F({testName:"Animation Preferences Update",status:"running",duration:0,details:"Testing animation preferences modification"});const e=performance.now(),s=b.globalAnimationsEnabled;try{N({globalAnimationsEnabled:!s}),await new Promise(e=>setTimeout(e,100));const t=b.globalAnimationsEnabled===!s;F({testName:"Animation Preferences Update",status:t?"passed":"failed",duration:performance.now()-e,details:t?`Successfully toggled animations from ${s} to ${!s}`:"Failed to update animation preference"}),N({globalAnimationsEnabled:s})}catch(t){F({testName:"Animation Preferences Update",status:"failed",duration:performance.now()-e,details:`Error updating animation preferences: ${t instanceof Error?t.message:"Unknown error"}`})}})(),await new Promise(e=>setTimeout(e,200)),await(async()=>{F({testName:"Accessibility Preferences Update",status:"running",duration:0,details:"Testing accessibility preferences modification"});const e=performance.now(),s=y.accessibility.highContrast;try{j({accessibility:{...y.accessibility,highContrast:!s}}),await new Promise(e=>setTimeout(e,100));const t=y.accessibility.highContrast===!s;F({testName:"Accessibility Preferences Update",status:t?"passed":"failed",duration:performance.now()-e,details:t?`Successfully toggled high contrast from ${s} to ${!s}`:"Failed to update accessibility preference"}),j({accessibility:{...y.accessibility,highContrast:s}})}catch(t){F({testName:"Accessibility Preferences Update",status:"failed",duration:performance.now()-e,details:`Error updating accessibility preferences: ${t instanceof Error?t.message:"Unknown error"}`})}})(),await new Promise(e=>setTimeout(e,200)),await(async()=>{F({testName:"Preferences Export",status:"running",duration:0,details:"Testing preferences export functionality"});const e=performance.now();try{const s=v();R(s);const t=JSON.parse(s),r=t.theme&&t.animation&&t.accessibility,a="object"==typeof t.theme&&"object"==typeof t.animation&&"object"==typeof t.accessibility,n=r&&a;F({testName:"Preferences Export",status:n?"passed":"failed",duration:performance.now()-e,details:n?`Successfully exported preferences (${s.length} characters)`:"Export failed validation - missing required fields or invalid structure"})}catch(s){F({testName:"Preferences Export",status:"failed",duration:performance.now()-e,details:`Error exporting preferences: ${s instanceof Error?s.message:"Unknown error"}`})}})(),await new Promise(e=>setTimeout(e,200)),await(async()=>{F({testName:"Preferences Import",status:"running",duration:0,details:"Testing preferences import functionality"});const e=performance.now();try{const s={theme:{theme:"dark",autoSwitch:!1,systemSync:!0},animation:{globalAnimationsEnabled:!1,respectReducedMotion:!0,performanceMode:!0},accessibility:{highContrast:!0,reducedMotion:!0,screenReaderOptimizations:!0}},t=JSON.stringify(s,null,2);if(E(t)){await new Promise(e=>setTimeout(e,200));const t=x.theme===s.theme.theme&&b.globalAnimationsEnabled===s.animation.globalAnimationsEnabled&&y.accessibility.highContrast===s.accessibility.highContrast;F({testName:"Preferences Import",status:t?"passed":"failed",duration:performance.now()-e,details:t?"Successfully imported and applied test preferences":"Import succeeded but preferences were not applied correctly"})}else F({testName:"Preferences Import",status:"failed",duration:performance.now()-e,details:"Import function returned false - invalid data format"})}catch(s){F({testName:"Preferences Import",status:"failed",duration:performance.now()-e,details:`Error importing preferences: ${s instanceof Error?s.message:"Unknown error"}`})}})(),await new Promise(e=>setTimeout(e,200)),await(async()=>{F({testName:"Preferences Persistence",status:"running",duration:0,details:"Testing preferences storage and retrieval"});const e=performance.now();try{const s=x.theme,t="light"===s?"dark":"light";w({theme:t}),await new Promise(e=>setTimeout(e,100));const r=localStorage.getItem("user-preferences");if(r){const s=JSON.parse(r),a=s.theme&&s.theme.theme===t;F({testName:"Preferences Persistence",status:a?"passed":"failed",duration:performance.now()-e,details:a?"Preferences successfully persisted to localStorage":"Preferences not found in localStorage or incorrect data"})}else F({testName:"Preferences Persistence",status:"failed",duration:performance.now()-e,details:"No preferences data found in localStorage"});w({theme:s})}catch(s){F({testName:"Preferences Persistence",status:"failed",duration:performance.now()-e,details:`Error testing persistence: ${s instanceof Error?s.message:"Unknown error"}`})}})(),await new Promise(e=>setTimeout(e,200)),await(async()=>{F({testName:"Preferences Reset",status:"running",duration:0,details:"Testing preferences reset functionality"});const e=performance.now();try{w({theme:"dark"}),N({globalAnimationsEnabled:!1}),j({accessibility:{...y.accessibility,highContrast:!0}}),await new Promise(e=>setTimeout(e,100)),P(),await new Promise(e=>setTimeout(e,200));const s="light"===x.theme&&!0===b.globalAnimationsEnabled&&!1===y.accessibility.highContrast;F({testName:"Preferences Reset",status:s?"passed":"failed",duration:performance.now()-e,details:s?"Successfully reset all preferences to defaults":"Reset failed - some preferences not restored to defaults"})}catch(s){F({testName:"Preferences Reset",status:"failed",duration:performance.now()-e,details:`Error testing reset: ${s instanceof Error?s.message:"Unknown error"}`})}})(),F({testName:"Test Suite Completed",status:"passed",duration:0,details:"All user preferences tests completed successfully"})}catch(e){F({testName:"Test Suite Error",status:"failed",duration:0,details:`Error during testing: ${e instanceof Error?e.message:"Unknown error"}`})}finally{A(!1),Y&&(w(Y.theme),N(Y.animation),j({accessibility:Y.ui.accessibility}))}},disabled:C,className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center gap-2",children:[C?s.jsx(r,{className:"w-4 h-4 animate-spin"}):s.jsx(a,{className:"w-4 h-4"}),C?"Running Tests...":"Run All Tests"]}),s.jsxs("button",{onClick:()=>S([]),className:"px-4 py-3 bg-red-500 text-white rounded-lg hover:bg-red-600 transition-colors duration-200 flex items-center gap-2",children:[s.jsx(n,{className:"w-4 h-4"}),"Clear Results"]}),s.jsxs("button",{onClick:P,className:"px-4 py-3 bg-orange-500 text-white rounded-lg hover:bg-orange-600 transition-colors duration-200 flex items-center gap-2",children:[s.jsx(i,{className:"w-4 h-4"}),"Reset Preferences"]})]})]}),s.jsxs(h.div,{className:"mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg transition-colors duration-300",layout:!0,children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Import/Export Controls"}),s.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Export Preferences"}),s.jsxs("button",{onClick:()=>{const e=v();R(e),O(!0)},className:"mb-3 px-4 py-2 bg-green-500 text-white rounded hover:bg-green-600 transition-colors duration-200 flex items-center gap-2",children:[s.jsx(o,{className:"w-4 h-4"}),"Export Current Preferences"]}),U&&s.jsxs("div",{children:[s.jsx("div",{className:"flex items-center gap-2 mb-2",children:s.jsxs("button",{onClick:()=>O(!M),className:"text-sm text-blue-500 hover:text-blue-600 flex items-center gap-1",children:[M?s.jsx(c,{className:"w-3 h-3"}):s.jsx(l,{className:"w-3 h-3"}),M?"Hide":"Show"," Export Data"]})}),M&&s.jsx("textarea",{value:U,readOnly:!0,className:"w-full h-32 p-2 border rounded text-xs font-mono bg-gray-50 dark:bg-gray-700",placeholder:"Exported preferences will appear here..."})]})]}),s.jsxs("div",{children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Import Preferences"}),s.jsx("textarea",{value:$,onChange:e=>I(e.target.value),className:"w-full h-32 p-2 border rounded text-xs font-mono mb-3 bg-white dark:bg-gray-700",placeholder:"Paste preferences JSON here..."}),s.jsxs("button",{onClick:()=>{$.trim()&&(E($)?(F({testName:"Manual Import",status:"passed",duration:0,details:"Successfully imported preferences from manual input"}),I("")):F({testName:"Manual Import",status:"failed",duration:0,details:"Failed to import preferences - invalid JSON format"}))},disabled:!$.trim(),className:"px-4 py-2 bg-purple-500 text-white rounded hover:bg-purple-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center gap-2",children:[s.jsx(d,{className:"w-4 h-4"}),"Import Preferences"]})]})]})]}),s.jsxs(h.div,{className:"p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg transition-colors duration-300",layout:!0,children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Test Results"}),0===k.length?s.jsx("p",{className:"text-gray-500 dark:text-gray-400",children:'No test results yet. Click "Run All Tests" to start testing.'}):s.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:s.jsx(g,{children:k.map((e,t)=>s.jsxs(h.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},exit:{opacity:0,x:20},className:"p-3 rounded-lg border-l-4 "+("passed"===e.status?"bg-green-50 dark:bg-green-900/20 border-green-500":"failed"===e.status?"bg-red-50 dark:bg-red-900/20 border-red-500":"bg-yellow-50 dark:bg-yellow-900/20 border-yellow-500"),children:[s.jsxs("div",{className:"flex items-center justify-between mb-1",children:[s.jsxs("div",{className:"flex items-center gap-2",children:[D(e.status),s.jsx("span",{className:"font-medium",children:e.testName})]}),s.jsxs("div",{className:"text-sm text-gray-500 dark:text-gray-400",children:[e.timestamp,e.duration>0&&` â€¢ ${e.duration.toFixed(2)}ms`]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-300",children:e.details})]},t))})})]})]})})};export{x as default};
