import{r as e,j as s,_ as t,a8 as a,a9 as r,aa as n,ab as i,ac as o,K as l,ad as c,ae as d,a2 as m,a3 as g,h}from"./react-vendor-Z_4RhRe6.js";import{u}from"./theme-core-CFJN5RsB.js";import{f as x}from"./hooks-Bg0oNxwz.js";import{m as p}from"./motion-Bk-wstwu.js";import"./vendor-Dr3LqIF9.js";import"./utils-B30PI53b.js";const f=()=>{const{theme:f,toggleTheme:j}=u();x();const[y,b]=e.useState(!1),[v,w]=e.useState([]),[N,M]=e.useState([]),[T,S]=e.useState(null),[k,P]=e.useState(null),[C,F]=e.useState(!1),[A,E]=e.useState(0),R=e.useRef(null),z=e.useRef(null),D=e.useRef(null);e.useEffect(()=>{(()=>{const e=navigator,s={userAgent:navigator.userAgent,platform:navigator.platform,hardwareConcurrency:navigator.hardwareConcurrency||1};if("deviceMemory"in navigator&&(s.deviceMemory=e.deviceMemory),"connection"in navigator){const t=e.connection;s.connection={effectiveType:t.effectiveType,downlink:t.downlink,rtt:t.rtt}}S(s)})()},[]);const H=e.useCallback(()=>{F(!0);let e=0,s=performance.now(),t=0;const a=()=>{e++;const r=performance.now();r-s>=1e3&&(t=Math.round(1e3*e/(r-s)),e=0,s=r,P(e=>({...e,fps:t,timestamp:(new Date).toLocaleTimeString()}))),C&&requestAnimationFrame(a)};if(requestAnimationFrame(a),z.current=setInterval(()=>{if("memory"in performance){const e=performance.memory;P(s=>({...s,memory:{used:Math.round(e.usedJSHeapSize/1048576),total:Math.round(e.totalJSHeapSize/1048576),limit:Math.round(e.jsHeapSizeLimit/1048576)}}))}},1e3),"PerformanceObserver"in window){D.current=new PerformanceObserver(e=>{e.getEntries().forEach(e=>{"paint"===e.entryType&&P(s=>({...s,paintTiming:{...s?.paintTiming,[e.name]:e.startTime}}))})});try{D.current.observe({entryTypes:["paint","measure"]})}catch(r){}}},[C]),$=e.useCallback(()=>{F(!1),z.current&&clearInterval(z.current),D.current&&D.current.disconnect()},[]),q=e=>{switch(e){case"good":return s.jsx(h,{className:"w-4 h-4 text-green-500"});case"warning":return s.jsx(g,{className:"w-4 h-4 text-yellow-500"});case"poor":return s.jsx(g,{className:"w-4 h-4 text-red-500"});default:return s.jsx(m,{className:"w-4 h-4 text-blue-500"})}},J=e=>{switch(e){case"good":return"text-green-500";case"warning":return"text-yellow-500";case"poor":return"text-red-500";default:return"text-blue-500"}};return e.useEffect(()=>()=>{$()},[$]),s.jsx("div",{className:"min-h-screen p-6 transition-colors duration-300",children:s.jsxs("div",{className:"max-w-7xl mx-auto",children:[s.jsxs(p.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"mb-8",children:[s.jsx("h1",{className:"text-3xl font-bold mb-2",children:"Performance Testing Suite"}),s.jsx("p",{className:"text-gray-600 dark:text-gray-400",children:"Comprehensive performance testing for theme switching and animations"})]}),T&&s.jsxs(p.div,{className:"mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg transition-colors duration-300",layout:!0,children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx(t,{className:"w-5 h-5"}),"System Information"]}),s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[s.jsx(a,{className:"w-4 h-4"}),"Hardware"]}),s.jsxs("ul",{className:"text-sm space-y-1",children:[s.jsxs("li",{children:["CPU Cores: ",s.jsx("strong",{children:T.hardwareConcurrency})]}),T.deviceMemory&&s.jsxs("li",{children:["Device Memory: ",s.jsxs("strong",{children:[T.deviceMemory," GB"]})]}),s.jsxs("li",{children:["Platform: ",s.jsx("strong",{children:T.platform})]})]})]}),T.connection&&s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Network"}),s.jsxs("ul",{className:"text-sm space-y-1",children:[s.jsxs("li",{children:["Type: ",s.jsx("strong",{children:T.connection.effectiveType})]}),s.jsxs("li",{children:["Downlink: ",s.jsxs("strong",{children:[T.connection.downlink," Mbps"]})]}),s.jsxs("li",{children:["RTT: ",s.jsxs("strong",{children:[T.connection.rtt," ms"]})]})]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Browser"}),s.jsx("p",{className:"text-sm break-all",children:T.userAgent})]})]})]}),s.jsxs(p.div,{className:"mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg transition-colors duration-300",layout:!0,children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx(r,{className:"w-5 h-5"}),"Real-time Performance Monitoring"]}),s.jsx("div",{className:"flex items-center gap-4 mb-4",children:s.jsxs("button",{onClick:C?$:H,className:"px-4 py-2 rounded transition-colors duration-200 flex items-center gap-2 "+(C?"bg-red-500 hover:bg-red-600 text-white":"bg-green-500 hover:bg-green-600 text-white"),children:[C?s.jsx(n,{className:"w-4 h-4"}):s.jsx(i,{className:"w-4 h-4"}),C?"Stop Monitoring":"Start Monitoring"]})}),k&&s.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Frame Rate"}),s.jsxs("div",{className:"text-2xl font-bold",children:[k.fps||0," FPS"]}),s.jsx("div",{className:"text-sm text-gray-500",children:"Target: 60 FPS"})]}),k.memory&&s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("h3",{className:"font-semibold mb-2 flex items-center gap-2",children:[s.jsx(o,{className:"w-4 h-4"}),"Memory"]}),s.jsxs("div",{className:"text-lg font-bold",children:[k.memory.used," MB"]}),s.jsxs("div",{className:"text-sm text-gray-500",children:["of ",k.memory.total," MB"]})]}),k.paintTiming&&s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Paint Timing"}),k.paintTiming["first-paint"]&&s.jsxs("div",{className:"text-sm",children:["First Paint: ",s.jsxs("strong",{children:[k.paintTiming["first-paint"].toFixed(2),"ms"]})]}),k.paintTiming["first-contentful-paint"]&&s.jsxs("div",{className:"text-sm",children:["FCP: ",s.jsxs("strong",{children:[k.paintTiming["first-contentful-paint"].toFixed(2),"ms"]})]})]}),s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsx("h3",{className:"font-semibold mb-2",children:"Last Update"}),s.jsx("div",{className:"text-sm",children:k.timestamp||"Not started"})]})]})]}),s.jsxs(p.div,{className:"mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg transition-colors duration-300",layout:!0,children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Performance Tests"}),s.jsx("div",{className:"flex items-center gap-4 mb-4",children:s.jsxs("button",{onClick:async()=>{b(!0),E(0);try{const e=[];e.push(await(async()=>{const e=[];for(let r=0;r<20;r++){const s=performance.now();j(),await new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(e)})});const t=performance.now();e.push(t-s),E((r+1)/20*25)}const s=e.sort((e,s)=>e-s),t=e.reduce((e,s)=>e+s,0)/e.length,a=s[Math.floor(s.length/2)];return{name:"Theme Switching",description:"Time to complete theme transitions",duration:t,iterations:20,results:{min:Math.min(...e),max:Math.max(...e),avg:t,median:a},status:t<50?"good":t<100?"warning":"poor"}})()),e.push(await(async()=>{const e=[];for(let r=0;r<10;r++){const s=performance.now();R.current&&(R.current.style.transform=`translateX(${r%2==0?"100px":"0px"})`),await new Promise(e=>{requestAnimationFrame(()=>{requestAnimationFrame(e)})});const t=performance.now();e.push(t-s),E(25+(r+1)/10*25)}const s=e.sort((e,s)=>e-s),t=e.reduce((e,s)=>e+s,0)/e.length,a=s[Math.floor(s.length/2)];return{name:"Animation Performance",description:"Time to render animation frames",duration:t,iterations:10,results:{min:Math.min(...e),max:Math.max(...e),avg:t,median:a},status:t<16.67?"good":t<33.33?"warning":"poor"}})()),e.push(await(async()=>{const e=[];for(let r=0;r<100;r++){const s=performance.now(),t=document.createElement("div");t.className="test-element",t.style.cssText=`\n        width: 100px;\n        height: 100px;\n        background-color: ${"light"===f?"#000":"#fff"};\n        transition: all 0.3s ease;\n      `,document.body.appendChild(t),t.offsetHeight,document.body.removeChild(t);const a=performance.now();e.push(a-s),E(50+(r+1)/100*25)}const s=e.sort((e,s)=>e-s),t=e.reduce((e,s)=>e+s,0)/e.length,a=s[Math.floor(s.length/2)];return{name:"DOM Manipulation",description:"Time to create, style, and remove DOM elements",duration:t,iterations:100,results:{min:Math.min(...e),max:Math.max(...e),avg:t,median:a},status:t<1?"good":t<5?"warning":"poor"}})()),e.push(await(async()=>{const e=[];for(let r=0;r<50;r++){const s=performance.now();document.documentElement.style.setProperty("--test-color",`hsl(${7*r}, 50%, 50%)`),document.documentElement.style.setProperty("--test-size",`${10+r}px`),getComputedStyle(document.documentElement).getPropertyValue("--test-color");const t=performance.now();e.push(t-s),E(75+(r+1)/50*25)}document.documentElement.style.removeProperty("--test-color"),document.documentElement.style.removeProperty("--test-size");const s=e.sort((e,s)=>e-s),t=e.reduce((e,s)=>e+s,0)/e.length,a=s[Math.floor(s.length/2)];return{name:"CSS Custom Properties",description:"Time to update CSS custom properties",duration:t,iterations:50,results:{min:Math.min(...e),max:Math.max(...e),avg:t,median:a},status:t<.5?"good":t<2?"warning":"poor"}})()),M(e);const s=[{name:"Theme Switch Time",value:e[0].results.avg,unit:"ms",status:e[0].results.avg<50?"good":e[0].results.avg<100?"warning":"poor",threshold:{good:50,warning:100},description:"Average time to complete theme transitions"},{name:"Animation Frame Time",value:e[1].results.avg,unit:"ms",status:e[1].results.avg<16.67?"good":e[1].results.avg<33.33?"warning":"poor",threshold:{good:16.67,warning:33.33},description:"Time per animation frame (60fps = 16.67ms)"},{name:"DOM Manipulation",value:e[2].results.avg,unit:"ms",status:e[2].results.avg<1?"good":e[2].results.avg<5?"warning":"poor",threshold:{good:1,warning:5},description:"Time to create and manipulate DOM elements"},{name:"CSS Property Updates",value:e[3].results.avg,unit:"ms",status:e[3].results.avg<.5?"good":e[3].results.avg<2?"warning":"poor",threshold:{good:.5,warning:2},description:"Time to update CSS custom properties"}];if("memory"in performance){const e=performance.memory;s.push({name:"Memory Usage",value:Math.round(e.usedJSHeapSize/1048576),unit:"MB",status:e.usedJSHeapSize<52428800?"good":e.usedJSHeapSize<104857600?"warning":"poor",threshold:{good:50,warning:100},description:"Current JavaScript heap memory usage"})}w(s)}catch(e){}finally{b(!1),E(100)}},disabled:y,className:"px-6 py-3 bg-blue-500 text-white rounded-lg hover:bg-blue-600 disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 flex items-center gap-2",children:[y?s.jsx(l,{className:"w-4 h-4 animate-spin"}):s.jsx(c,{className:"w-4 h-4"}),y?"Running Tests...":"Run Performance Tests"]})}),y&&s.jsxs("div",{className:"mb-4",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("span",{className:"text-sm font-medium",children:"Test Progress"}),s.jsxs("span",{className:"text-sm text-gray-500",children:[Math.round(A),"%"]})]}),s.jsx("div",{className:"w-full bg-gray-200 dark:bg-gray-700 rounded-full h-2",children:s.jsx("div",{className:"bg-blue-500 h-2 rounded-full transition-all duration-300",style:{width:`${A}%`}})})]})]}),v.length>0&&s.jsxs(p.div,{className:"mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg transition-colors duration-300",layout:!0,children:[s.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2",children:[s.jsx(d,{className:"w-5 h-5"}),"Performance Metrics"]}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:v.map((e,t)=>s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsx("h3",{className:"font-semibold",children:e.name}),q(e.status)]}),s.jsxs("div",{className:`text-2xl font-bold ${J(e.status)}`,children:[e.value.toFixed(2)," ",e.unit]}),s.jsx("div",{className:"text-sm text-gray-500 mt-1",children:e.description}),s.jsxs("div",{className:"text-xs text-gray-400 mt-2",children:["Good: < ",e.threshold.good,e.unit," | Warning: < ",e.threshold.warning,e.unit]})]},t))})]}),N.length>0&&s.jsxs(p.div,{className:"mb-8 p-6 bg-white dark:bg-gray-800 rounded-lg shadow-lg transition-colors duration-300",layout:!0,children:[s.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Detailed Test Results"}),s.jsx("div",{className:"space-y-4",children:N.map((e,t)=>s.jsxs("div",{className:"p-4 bg-gray-50 dark:bg-gray-700 rounded-lg",children:[s.jsxs("div",{className:"flex items-center justify-between mb-2",children:[s.jsxs("h3",{className:"font-semibold flex items-center gap-2",children:[q(e.status),e.name]}),s.jsxs("span",{className:"text-sm text-gray-500",children:[e.iterations," iterations"]})]}),s.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-3",children:e.description}),s.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:[s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Min:"}),s.jsxs("div",{className:"font-semibold",children:[e.results.min.toFixed(2),"ms"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Max:"}),s.jsxs("div",{className:"font-semibold",children:[e.results.max.toFixed(2),"ms"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Average:"}),s.jsxs("div",{className:`font-semibold ${J(e.status)}`,children:[e.results.avg.toFixed(2),"ms"]})]}),s.jsxs("div",{children:[s.jsx("span",{className:"text-gray-500",children:"Median:"}),s.jsxs("div",{className:"font-semibold",children:[e.results.median.toFixed(2),"ms"]})]})]})]},t))})]}),s.jsx("div",{ref:R,className:"hidden w-4 h-4 bg-blue-500 transition-transform duration-300","aria-hidden":"true"})]})})};export{f as default};
