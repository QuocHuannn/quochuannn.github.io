var e=Object.defineProperty,t=(t,n,i)=>((t,n,i)=>n in t?e(t,n,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[n]=i)(t,"symbol"!=typeof n?n+"":n,i);import{s as n,T as i}from"./theme-core-CFJN5RsB.js";const s={globalAnimationsEnabled:!0,respectReducedMotion:!0,themeTransition:{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},pageTransition:{duration:400,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},componentTransition:{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},hoverAnimations:{duration:150,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},clickAnimations:{duration:100,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},loadingAnimations:{duration:1e3,easing:"linear",enabled:!0},progressAnimations:{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},scrollAnimations:{duration:600,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},parallaxAnimations:{duration:0,easing:"linear",enabled:!0},customPresets:{bounce:{duration:400,easing:"cubic-bezier(0.68, -0.55, 0.265, 1.55)",enabled:!0},smooth:{duration:600,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",enabled:!0},snappy:{duration:150,easing:"cubic-bezier(0.25, 0.46, 0.45, 0.94)",enabled:!0}}};class r{constructor(e){t(this,"preferences"),t(this,"mediaQuery",null),t(this,"listeners",new Set),t(this,"reducedMotionListeners",new Set),this.preferences={...s,...e},"undefined"!=typeof window&&this.setupReducedMotionListener()}getPreferences(){return{...this.preferences}}setPreferences(e){this.preferences={...this.preferences,...e},this.notifyListeners()}updateAnimationConfig(e,t){this.preferences[e]&&"object"==typeof this.preferences[e]&&(this.preferences[e]={...this.preferences[e],...t},this.notifyListeners())}setCustomPreset(e,t){this.preferences.customPresets[e]=t,this.notifyListeners()}removeCustomPreset(e){delete this.preferences.customPresets[e],this.notifyListeners()}getEffectiveConfig(e){const t=this.preferences[e],n=this.getReducedMotionPreference();return!this.preferences.globalAnimationsEnabled||this.preferences.respectReducedMotion&&n?{...t,duration:0,enabled:!1}:t}getCustomPreset(e){const t=this.preferences.customPresets[e];if(!t)return null;const n=this.getReducedMotionPreference();return!this.preferences.globalAnimationsEnabled||this.preferences.respectReducedMotion&&n?{...t,duration:0,enabled:!1}:t}shouldAnimate(e){if(!this.preferences.globalAnimationsEnabled)return!1;const t=this.getReducedMotionPreference();if(this.preferences.respectReducedMotion&&t)return!1;if(e){const t=this.preferences[e];return!t||void 0===t.enabled||t.enabled}return!0}getCSSTransition(e,t="all"){const n=this.getEffectiveConfig(e);if(!n.enabled||0===n.duration)return"none";const i=n.delay?` ${n.delay}ms`:"";return`${t} ${n.duration}ms ${n.easing}${i}`}getCSSAnimationDuration(e){return`${this.getEffectiveConfig(e).duration}ms`}getCSSCustomProperties(){const e={},t=this.getEffectiveConfig("themeTransition");e["--theme-transition-duration"]=`${t.duration}ms`,e["--theme-transition-easing"]=t.easing;const n=this.getEffectiveConfig("componentTransition");e["--component-transition-duration"]=`${n.duration}ms`,e["--component-transition-easing"]=n.easing;const i=this.getEffectiveConfig("hoverAnimations");return e["--hover-transition-duration"]=`${i.duration}ms`,e["--hover-transition-easing"]=i.easing,e["--animations-enabled"]=this.shouldAnimate()?"1":"0",e}applyCSSCustomProperties(){if("undefined"==typeof window)return;const e=this.getCSSCustomProperties();n(e)}getReducedMotionPreference(){return"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}subscribeToReducedMotion(e){return this.reducedMotionListeners.add(e),()=>{this.reducedMotionListeners.delete(e)}}reset(){this.preferences={...s},this.notifyListeners()}export(){return JSON.stringify(this.preferences,null,2)}import(e){try{const t=JSON.parse(e);return this.setPreferences(t),!0}catch(t){return!1}}setupReducedMotionListener(){this.mediaQuery=window.matchMedia("(prefers-reduced-motion: reduce)"),this.mediaQuery.addEventListener("change",e=>{this.reducedMotionListeners.forEach(t=>{try{t(e.matches)}catch(n){}}),this.applyCSSCustomProperties()})}notifyListeners(){this.listeners.forEach(e=>{try{e(this.preferences)}catch(t){}}),this.applyCSSCustomProperties()}destroy(){this.mediaQuery&&(this.mediaQuery.removeEventListener("change",()=>{}),this.mediaQuery=null),this.listeners.clear(),this.reducedMotionListeners.clear()}}let o=null;const a=(o||(o=new r),o),c={layout:{sidebar:"auto",navigation:"top",density:"comfortable",showBreadcrumbs:!0,showTooltips:!0},accessibility:{highContrast:!1,largeText:!1,reducedMotion:!1,screenReader:!1,keyboardNavigation:!0,focusIndicators:"default"},performance:{enableAnimations:!0,enableTransitions:!0,enableParallax:!0,enableBlur:!0,imageQuality:"auto",lazyLoading:!0},content:{language:"en",dateFormat:"MM/dd/yyyy",timeFormat:"12h",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,currency:"USD",numberFormat:"en-US"},privacy:{analytics:!0,cookies:!0,localStorage:!0,sessionStorage:!0,indexedDB:!0}},d={storageKey:"user-preferences",version:"1.0.0",autoSync:!0,syncInterval:3e4,enableCloudSync:!1,cloudSyncUrl:"",onPreferencesChange:()=>{},onSyncError:()=>{},onCloudSyncSuccess:()=>{}},l=new class{constructor(e={}){t(this,"preferences"),t(this,"options"),t(this,"themeStorage"),t(this,"animationManager"),t(this,"syncTimer"),t(this,"listeners",new Set),t(this,"isInitialized",!1),this.options={...d,...e},this.preferences=this.loadPreferences(),this.themeStorage=new i({key:`${this.options.storageKey}-theme`,enableAutoSync:this.options.autoSync,fallbackPreferences:{theme:this.preferences.theme.theme,animationsEnabled:this.preferences.theme.animationsEnabled}}),this.animationManager=new r({globalAnimationsEnabled:this.preferences.animations.globalAnimationsEnabled,respectReducedMotion:this.preferences.animations.respectReducedMotion}),this.options.autoSync&&this.startAutoSync(),this.setupStorageListener(),this.isInitialized=!0}loadPreferences(){try{const e=localStorage.getItem(this.options.storageKey);if(e){const t=JSON.parse(e);return t.version!==this.options.version?this.migratePreferences(t):this.mergeWithDefaults(t)}}catch(e){}return this.createDefaultPreferences()}createDefaultPreferences(){return{theme:{theme:"light",animationsEnabled:!0,transitionDuration:300,reducedMotion:!1,highContrast:!1,fontSize:"medium",lastModified:Date.now()},animations:{globalAnimationsEnabled:!0,respectReducedMotion:!0,themeTransition:{duration:300,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},pageTransition:{duration:400,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},componentTransition:{duration:200,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},hoverAnimations:{duration:150,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},clickAnimations:{duration:100,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},loadingAnimations:{duration:1e3,easing:"linear",enabled:!0},progressAnimations:{duration:500,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},scrollAnimations:{duration:600,easing:"cubic-bezier(0.4, 0, 0.2, 1)",enabled:!0},parallaxAnimations:{duration:0,easing:"linear",enabled:!0},customPresets:{}},ui:{...c},version:this.options.version,lastUpdated:Date.now()}}mergeWithDefaults(e){const t=this.createDefaultPreferences();return{theme:{...t.theme,...e.theme},animations:{...t.animations,...e.animations},ui:{layout:{...t.ui.layout,...e.ui?.layout},accessibility:{...t.ui.accessibility,...e.ui?.accessibility},performance:{...t.ui.performance,...e.ui?.performance},content:{...t.ui.content,...e.ui?.content},privacy:{...t.ui.privacy,...e.ui?.privacy}},version:this.options.version,lastUpdated:e.lastUpdated||Date.now(),userId:e.userId}}migratePreferences(e){const t=this.mergeWithDefaults(e);return t.version=this.options.version,t.lastUpdated=Date.now(),t}savePreferences(){try{this.preferences.lastUpdated=Date.now(),localStorage.setItem(this.options.storageKey,JSON.stringify(this.preferences)),this.themeStorage.updatePreference("theme",this.preferences.theme.theme),this.animationManager.setPreferences({globalAnimationsEnabled:this.preferences.animations.globalAnimationsEnabled}),this.notifyListeners(),this.options.onPreferencesChange(this.preferences)}catch(e){this.options.onSyncError(e)}}setupStorageListener(){window.addEventListener("storage",e=>{if(e.key===this.options.storageKey&&e.newValue)try{const t=JSON.parse(e.newValue);t.lastUpdated>this.preferences.lastUpdated&&(this.preferences=t,this.notifyListeners())}catch(t){}})}startAutoSync(){this.syncTimer&&clearInterval(this.syncTimer),this.syncTimer=window.setInterval(()=>{this.options.enableCloudSync&&this.syncWithCloud()},this.options.syncInterval)}stopAutoSync(){this.syncTimer&&(clearInterval(this.syncTimer),this.syncTimer=void 0)}async syncWithCloud(){if(this.options.enableCloudSync&&this.options.cloudSyncUrl)try{const e=await fetch(this.options.cloudSyncUrl,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userId:this.preferences.userId,preferences:this.preferences,timestamp:Date.now()})});if(e.ok){const t=await e.json();t.preferences&&t.timestamp>this.preferences.lastUpdated&&(this.preferences=this.mergeWithDefaults(t.preferences),this.savePreferences()),this.options.onCloudSyncSuccess()}}catch(e){this.options.onSyncError(e)}}notifyListeners(){this.listeners.forEach(e=>{try{e(this.preferences)}catch(t){}})}getPreferences(){return{...this.preferences}}getThemePreferences(){return{...this.preferences.theme}}getAnimationPreferences(){return{...this.preferences.animations}}getUIPreferences(){return{...this.preferences.ui}}updateThemePreferences(e){this.preferences.theme={...this.preferences.theme,...e},this.savePreferences()}updateAnimationPreferences(e){this.preferences.animations={...this.preferences.animations,...e},this.savePreferences()}updateUIPreferences(e){this.preferences.ui={layout:{...this.preferences.ui.layout,...e.layout},accessibility:{...this.preferences.ui.accessibility,...e.accessibility},performance:{...this.preferences.ui.performance,...e.performance},content:{...this.preferences.ui.content,...e.content},privacy:{...this.preferences.ui.privacy,...e.privacy}},this.savePreferences()}updatePreferences(e){this.preferences={...this.preferences,...e,lastUpdated:Date.now()},this.savePreferences()}resetPreferences(){this.preferences=this.createDefaultPreferences(),this.savePreferences()}resetSection(e){const t=this.createDefaultPreferences();switch(e){case"theme":this.preferences.theme=t.theme;break;case"animations":this.preferences.animations=t.animations;break;case"ui":this.preferences.ui=t.ui}this.savePreferences()}exportPreferences(){return JSON.stringify(this.preferences,null,2)}importPreferences(e,t=!0){try{const n=JSON.parse(e);return this.preferences=t?this.mergeWithDefaults(n):{...this.createDefaultPreferences(),...n,version:this.options.version,lastUpdated:Date.now()},this.savePreferences(),!0}catch(n){return!1}}subscribe(e){return this.listeners.add(e),()=>{this.listeners.delete(e)}}setUserId(e){this.preferences.userId=e,this.savePreferences()}setCloudSync(e,t){this.options.enableCloudSync=e,t&&(this.options.cloudSyncUrl=t),e&&this.options.autoSync?this.startAutoSync():this.stopAutoSync()}getStorageInfo(){const e=new Blob([this.exportPreferences()]).size,t=this.themeStorage.getStorageInfo();return{used:e+t.used,available:t.available,total:e+t.used+t.available}}destroy(){this.stopAutoSync(),this.listeners.clear()}};let u=!1;if("undefined"!=typeof window){const e=window.matchMedia("(prefers-reduced-motion: reduce)");u=e.matches,e.addEventListener("change",e=>{u=e.matches})}const h=()=>!u,p=e=>{if(!h()){const{initial:t,animate:n,exit:i,transition:s,variants:r,whileHover:o,whileTap:a,...c}=e;return c}return(e=>{if(!h()){const{initial:t,animate:n,exit:i,transition:s,variants:r,whileHover:o,whileTap:a,...c}=e;return c}return{...e,transition:{duration:.2,ease:"easeOut",...e.transition}}})(e)};function f(e="light"){if("vibrate"in navigator){const t={light:[10],medium:[20],heavy:[30]};navigator.vibrate(t[e])}}function m(){return{hasTouch:"ontouchstart"in window,hasHover:window.matchMedia("(hover: hover)").matches,hasPointer:window.matchMedia("(pointer: fine)").matches,supportsPassive:(()=>{let e=!1;try{const t=Object.defineProperty({},"passive",{get:()=>(e=!0,!0)});window.addEventListener("testPassive",()=>{},t),window.removeEventListener("testPassive",()=>{},t)}catch(t){}return e})(),devicePixelRatio:window.devicePixelRatio||1,screenSize:{width:window.screen.width,height:window.screen.height},viewportSize:{width:window.innerWidth,height:window.innerHeight}}}function g(){(window.innerWidth<=768||"ontouchstart"in window)&&(function(){let e=document.querySelector('meta[name="viewport"]');e||(e=document.createElement("meta"),e.name="viewport",document.head.appendChild(e)),e.content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover";const t=document.documentElement,n=()=>{const e=.01*window.innerHeight;t.style.setProperty("--vh",`${e}px`)};n(),window.addEventListener("resize",n),window.addEventListener("orientationchange",()=>{setTimeout(n,100)});let i=0;document.addEventListener("touchend",e=>{const t=Date.now();t-i<=300&&e.preventDefault(),i=t},{passive:!1})}(),function(){document.querySelectorAll(".overflow-auto, .overflow-y-auto, .overflow-x-auto").forEach(e=>{const t=e;t.style.webkitOverflowScrolling="touch",t.style.overscrollBehavior="contain"});let e=!1;window.addEventListener("scroll",()=>{e||(requestAnimationFrame(()=>{e=!1}),e=!0)},{passive:!0})}(),document.documentElement.classList.add("mobile-optimized"))}function b(e,t={}){const{hapticFeedback:n=!0,scaleEffect:i=!0,rippleEffect:s=!1}=t;e.style.cursor="pointer",e.style.userSelect="none",e.style.webkitUserSelect="none",e.style.webkitTapHighlightColor="transparent",i&&(e.style.transition="transform 0.1s ease"),e.addEventListener("touchstart",t=>{n&&f("light"),i&&(e.style.transform="scale(0.95)"),s&&function(e,t){const n=e.getBoundingClientRect(),i=document.createElement("span"),s=Math.max(n.width,n.height),r=t.clientX-n.left-s/2,o=t.clientY-n.top-s/2;if(i.style.cssText=`\n    position: absolute;\n    border-radius: 50%;\n    background: rgba(255, 255, 255, 0.3);\n    transform: scale(0);\n    animation: ripple 0.6s linear;\n    width: ${s}px;\n    height: ${s}px;\n    left: ${r}px;\n    top: ${o}px;\n    pointer-events: none;\n  `,!document.querySelector("#ripple-keyframes")){const e=document.createElement("style");e.id="ripple-keyframes",e.textContent="\n      @keyframes ripple {\n        to {\n          transform: scale(4);\n          opacity: 0;\n        }\n      }\n    ",document.head.appendChild(e)}e.style.position="relative",e.style.overflow="hidden",e.appendChild(i),setTimeout(()=>{i.remove()},600)}(e,t.touches[0])},{passive:!0}),e.addEventListener("touchend",()=>{i&&(e.style.transform="")},{passive:!0}),e.addEventListener("touchcancel",()=>{i&&(e.style.transform="")},{passive:!0})}const y=async e=>{const t=e.map(({src:e,options:t})=>((e,t={})=>new Promise((n,i)=>{const s=new Image,r=((e,t={})=>{const{width:n,height:i,quality:s=75,format:r,blur:o}=t;if(e.includes("trae-api-sg.mchost.guru")||e.startsWith("http"))return e;const a=new URLSearchParams;n&&a.set("w",n.toString()),i&&a.set("h",i.toString()),75!==s&&a.set("q",s.toString()),r&&a.set("f",r),o&&a.set("blur","10");const c=a.toString();return c?`${e}?${c}`:e})(e,t);s.onload=()=>n(),s.onerror=i,s.src=r}))(e,t));await Promise.allSettled(t)},v=Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));function w(e){if("serviceWorker"in navigator){if(new URL("/",window.location.href).origin!==window.location.origin)return;window.addEventListener("load",()=>{const t="/sw.js";v?(function(e,t){fetch(e,{headers:{"Service-Worker":"script"}}).then(n=>{const i=n.headers.get("content-type");404===n.status||null!=i&&-1===i.indexOf("javascript")?navigator.serviceWorker.ready.then(e=>{e.unregister().then(()=>{window.location.reload()})}):S(e,t)}).catch(()=>{})}(t,e),navigator.serviceWorker.ready.then(()=>{})):S(t,e)})}}function S(e,t){navigator.serviceWorker.register(e).then(e=>{e.onupdatefound=()=>{const n=e.installing;null!=n&&(n.onstatechange=()=>{"installed"===n.state&&(navigator.serviceWorker.controller?t&&t.onUpdate&&t.onUpdate(e):t&&t.onSuccess&&t.onSuccess(e))})}}).catch(e=>{})}function P(){"Notification"in window&&"granted"===Notification.permission&&new Notification("Update Available",{body:"A new version of the app is available. Refresh to update.",icon:"/images/icon-192x192.png",tag:"app-update"})}function E(){const e=navigator.userAgent,t=/Chrome/.test(e)&&/Google Inc/.test(navigator.vendor),n=/Firefox/.test(e),i=/Safari/.test(e)&&!/Chrome/.test(e),s=/Edg/.test(e),r=/Trident/.test(e);let o="Unknown",a="0";if(t){o="Chrome";const t=e.match(/Chrome\/(\d+)/);a=t?t[1]:"0"}else if(n){o="Firefox";const t=e.match(/Firefox\/(\d+)/);a=t?t[1]:"0"}else if(i){o="Safari";const t=e.match(/Version\/(\d+)/);a=t?t[1]:"0"}else if(s){o="Edge";const t=e.match(/Edg\/(\d+)/);a=t?t[1]:"0"}else if(r){o="Internet Explorer";const t=e.match(/rv:(\d+)/);a=t?t[1]:"0"}const c=/Mobi|Android/i.test(e),d=/Tablet|iPad/i.test(e);return{name:o,version:a,isMobile:c,isTablet:d,isDesktop:!c&&!d,supportsWebP:C(),supportsAvif:L(),supportsBackdropFilter:CSS.supports("backdrop-filter","blur(1px)")||CSS.supports("-webkit-backdrop-filter","blur(1px)"),supportsGrid:CSS.supports("display","grid"),supportsCustomProperties:CSS.supports("--css","variables")}}function C(){const e=document.createElement("canvas");return e.width=1,e.height=1,0===e.toDataURL("image/webp").indexOf("data:image/webp")}function L(){const e=document.createElement("canvas");e.width=1,e.height=1;try{return 0===e.toDataURL("image/avif").indexOf("data:image/avif")}catch{return!1}}function A(){const e=E(),t=document.documentElement;if(t.classList.add(`browser-${e.name.toLowerCase()}`),t.classList.add(`version-${e.version}`),e.isMobile&&t.classList.add("is-mobile"),e.isTablet&&t.classList.add("is-tablet"),e.isDesktop&&t.classList.add("is-desktop"),e.supportsWebP||t.classList.add("no-webp"),e.supportsBackdropFilter||t.classList.add("no-backdrop-filter"),e.supportsGrid||t.classList.add("no-grid"),e.supportsCustomProperties||t.classList.add("no-custom-properties"),"Safari"===e.name){const e=()=>{const e=.01*window.innerHeight;document.documentElement.style.setProperty("--vh",`${e}px`)};e(),window.addEventListener("resize",e),window.addEventListener("orientationchange",e)}if("Firefox"===e.name&&(t.style.transform="translateZ(0)"),e.isMobile){const e=document.querySelector('meta[name="viewport"]');e&&e.setAttribute("content","width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"),document.body.style.touchAction="manipulation"}}function T(){if("performance"in window){const e=E();window.addEventListener("load",()=>{setTimeout(()=>{const t=performance.getEntriesByType("navigation")[0],n={browser:e.name,version:e.version,device:e.isMobile?"mobile":e.isTablet?"tablet":"desktop",loadTime:t.loadEventEnd-t.loadEventStart,domContentLoaded:t.domContentLoadedEventEnd-t.domContentLoadedEventStart,firstPaint:performance.getEntriesByType("paint").find(e=>"first-paint"===e.name)?.startTime||0,firstContentfulPaint:performance.getEntriesByType("paint").find(e=>"first-contentful-paint"===e.name)?.startTime||0};localStorage.setItem("performance-metrics",JSON.stringify(n))},0)})}}export{r as A,a,m as b,f as c,b as d,A as e,p as g,g as i,T as m,y as p,w as r,P as s,l as u};
