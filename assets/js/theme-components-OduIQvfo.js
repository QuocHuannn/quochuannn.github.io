import{R as e,r as t,f as r,g as s,j as a}from"./react-vendor-Z_4RhRe6.js";import{u as o}from"./theme-core-CFJN5RsB.js";import{u as n}from"./hooks-Bg0oNxwz.js";import{u as l,a as i,b as c,c as d,d as m}from"./theme-advanced-8-y3tNqu.js";const u={sm:{button:"w-8 h-8 text-sm",icon:"w-4 h-4",label:"text-xs"},md:{button:"w-10 h-10 text-base",icon:"w-5 h-5",label:"text-sm"},lg:{button:"w-12 h-12 text-lg",icon:"w-6 h-6",label:"text-base"}},h={floating:{container:"fixed bottom-20 right-6 z-[70]",button:"backdrop-blur-md border shadow-lg hover:shadow-xl"},inline:{container:"inline-flex",button:"backdrop-blur-sm border"},minimal:{container:"inline-flex",button:"bg-transparent"}},x=e=>{switch(e){case"floating":return{backgroundColor:"var(--color-surface-glass)",borderColor:"var(--color-border-glass)"};case"inline":return{backgroundColor:"var(--color-surface-muted)",borderColor:"var(--color-border-muted)"};case"minimal":return{backgroundColor:"transparent"};default:return{}}},b=e.memo(({variant:e="inline",size:l="md",className:i="",showLabel:c=!1,disabled:d=!1,"aria-label":m})=>{const{theme:b,actualTheme:g,setTheme:p}=o(),{announce:f}=n(),[v,y]=t.useState(!1),[j,w]=t.useState(!1),[N,k]=t.useState([]),T=t.useRef(null),[C,S]=t.useState(""),D=t.useRef(),$=t.useRef(),E=t.useMemo(()=>"undefined"!=typeof window&&window.matchMedia("(prefers-reduced-motion: reduce)").matches,[]),M=t.useCallback((e=b)=>{switch(e){case"light":default:return"Light";case"dark":return"Dark"}},[b]),L=t.useCallback((()=>{let e;return(...t)=>{clearTimeout(e),e=setTimeout(()=>(()=>{const e="light"===b?"dark":"light";p(e);const t=`Theme switched to ${M(e).toLowerCase()}`;S(t),f(t)})(...t),150)}})(),[b,p,f,M,S]),R=t.useCallback(e=>{if(!d){if(D.current&&clearTimeout(D.current),y(!0),D.current=setTimeout(()=>y(!1),200),!E&&T.current){const t=T.current.getBoundingClientRect(),r=e.clientX-t.left,s=e.clientY-t.top,a={id:Date.now(),x:r,y:s};k(e=>[...e,a]),$.current=setTimeout(()=>{k(e=>e.filter(e=>e.id!==a.id))},600)}L()}},[d,L,E]),_=t.useCallback(e=>{if(!d)switch(e.key){case"Enter":case" ":e.preventDefault(),y(!0);break;case"ArrowRight":case"ArrowDown":case"ArrowLeft":case"ArrowUp":e.preventDefault(),L();break;case"Home":e.preventDefault(),p("light");const t="Theme set to light";S(t),f(t);break;case"End":e.preventDefault(),p("dark");const r="Theme set to dark";S(r),f(r);break;case"Escape":e.preventDefault(),T.current?.blur()}},[d,L,p,S,f]),P=t.useCallback(e=>{d||"Enter"!==e.key&&" "!==e.key||(e.preventDefault(),y(!1),L())},[d,L]);t.useCallback(e=>{if(b!==e){p(e);const t=`Theme set to ${M(e).toLowerCase()}`;S(t),f(t)}},[b,p,M,f,S]);const z=t.useMemo(()=>{switch(b){case"light":default:return r;case"dark":return s}},[b]),A=t.useMemo(()=>{switch(b){case"light":return"Switch to dark mode";case"dark":return"Switch to light mode";default:return"Switch theme"}},[b]),B=t.useMemo(()=>M(),[M]),O=t.useMemo(()=>`Current theme: ${M()}. Press to switch to ${"light"===b?"Dark":"Light"}. Use arrow keys to toggle theme, Home for Light, End for Dark, Escape to unfocus.`,[b,M]),I=t.useCallback(()=>{d||w(!0)},[d]),U=t.useCallback(()=>{w(!1)},[]);return t.useEffect(()=>()=>{D.current&&clearTimeout(D.current),$.current&&clearTimeout($.current)},[]),t.useEffect(()=>{if(C){const e=setTimeout(()=>S(""),1e3);return()=>clearTimeout(e)}},[C]),a.jsxs("div",{className:`${h[e].container} ${i}`,children:[a.jsxs("button",{ref:T,type:"button",onClick:R,onKeyDown:_,onKeyUp:P,onMouseEnter:I,onMouseLeave:U,disabled:d,"aria-label":m||A,"aria-describedby":`theme-toggle-description-${b}`,"aria-pressed":"dark"===b,"aria-expanded":!1,"aria-haspopup":!1,role:"switch","aria-checked":"dark"===b,tabIndex:d?-1:0,className:`\n          ${u[l].button}\n          ${h[e].button}\n          relative overflow-hidden rounded-full\n          ${E?"transition-colors duration-200":"transition-all duration-300 ease-out"}\n          focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-transparent\n          focus-visible:ring-2 focus-visible:ring-offset-2\n          disabled:opacity-50 disabled:cursor-not-allowed disabled:focus:ring-0\n          ${E?"":"hover:scale-105 active:scale-95"}\n          ${v&&!E?"scale-95":""}\n        `,style:{...x(e),color:"var(--color-text-secondary)","--tw-ring-color":"var(--color-primary-muted)","--tw-ring-offset-color":"transparent",transform:E?"none":v?"scale(0.95)":j?"scale(1.05)":"scale(1)",boxShadow:E||!j||d?void 0:`0 0 20px ${"dark"===b?"rgba(255, 255, 255, 0.15)":"rgba(59, 130, 246, 0.25)"}, 0 4px 12px rgba(0, 0, 0, 0.1)`,filter:E||!j||d?void 0:"brightness(1.1)"},children:[a.jsx("div",{className:"flex items-center justify-center "+(E?"transition-none":"transition-all duration-500 ease-out"),style:{transform:`rotate(${"dark"===b?"180deg":"0deg"}) ${!E&&j?"scale(1.1)":"scale(1)"}`,filter:E||"dark"!==b?E||"light"!==b?"none":"drop-shadow(0 0 8px rgba(59, 130, 246, 0.3))":"drop-shadow(0 0 8px rgba(255, 255, 255, 0.3))"},children:a.jsx(z,{className:`${u[l].icon} ${E?"":"transition-all duration-300"}`,style:{color:!E&&j?"dark"===b?"rgba(255, 255, 255, 0.9)":"var(--color-primary)":"currentColor"}})}),!E&&N.map(e=>a.jsx("div",{className:"absolute pointer-events-none rounded-full animate-ping",style:{left:e.x-10,top:e.y-10,width:20,height:20,backgroundColor:"dark"===b?"rgba(255, 255, 255, 0.3)":"rgba(59, 130, 246, 0.3)",animationDuration:"0.6s",animationTimingFunction:"cubic-bezier(0.4, 0, 0.6, 1)"}},e.id)),a.jsx("span",{className:"sr-only","aria-live":"polite","aria-atomic":"true",role:"status",children:C}),a.jsx("span",{id:`theme-toggle-description-${b}`,className:"sr-only",children:O})]}),c&&a.jsx("span",{className:`ml-2 ${u[l].label} transition-opacity duration-200`,style:{color:"var(--color-text-muted)"},children:B})]})});b.displayName="ThemeToggle";const g=Object.freeze(Object.defineProperty({__proto__:null,ThemeToggle:b,default:b},Symbol.toStringTag,{value:"Module"})),p=t.memo(()=>{const e=l(),t=i(),r=c("var(--color-bg-primary)","var(--color-bg-primary)"),s=c("var(--color-text-primary)","var(--color-text-primary)"),o=c("var(--color-border)","var(--color-border)"),n=d();return a.jsxs("div",{className:`p-4 rounded-lg border transition-colors duration-200 ${t}`,style:{backgroundColor:r,color:s,borderColor:o},children:[a.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Theme Aware Component"}),a.jsxs("p",{className:"text-sm opacity-75 mb-3",children:["Current theme: ",a.jsx("span",{className:"font-medium",children:n})]}),a.jsxs("div",{className:"space-y-2",children:[a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx("div",{className:"w-3 h-3 rounded-full "+(e?"bg-blue-400":"bg-blue-600")}),a.jsx("span",{className:"text-sm",children:e?"Dark mode active":"Light mode active"})]}),a.jsx("div",{className:"text-xs opacity-60",children:"This component only re-renders when the actual theme changes, not when theme functions change reference."})]}),e?a.jsx("div",{className:"mt-3 p-2 bg-gray-800 rounded text-gray-300 text-xs",children:"ðŸŒ™ Dark mode specific content"}):a.jsx("div",{className:"mt-3 p-2 bg-gray-100 rounded text-gray-700 text-xs",children:"â˜€ï¸ Light mode specific content"})]})});p.displayName="ThemeAwareComponent";const f=Object.freeze(Object.defineProperty({__proto__:null,default:p},Symbol.toStringTag,{value:"Module"})),v=t.memo(()=>{const r=l(),[s,o]=t.useState(0);return e.useEffect(()=>{o(e=>e+1)}),a.jsxs("div",{className:"p-2 rounded "+(r?"bg-gray-800 text-white":"bg-gray-100 text-black"),children:[a.jsx("div",{className:"text-sm font-medium",children:r?"ðŸŒ™ Dark Mode":"â˜€ï¸ Light Mode"}),a.jsxs("div",{className:"text-xs opacity-60",children:["Renders: ",s]})]})}),y=t.memo(()=>{const r=d(),[s,o]=t.useState(0);return e.useEffect(()=>{o(e=>e+1)}),a.jsxs("div",{className:"p-2 rounded border",children:[a.jsxs("div",{className:"text-sm font-medium",children:["Current: ",r]}),a.jsxs("div",{className:"text-xs opacity-60",children:["Renders: ",s]})]})}),j=t.memo(()=>{const r=m(),[s,o]=t.useState(0);return e.useEffect(()=>{o(e=>e+1)}),a.jsxs("div",{className:"p-2",children:[a.jsx("button",{onClick:r,className:"px-3 py-1 bg-blue-500 text-white rounded hover:bg-blue-600 transition-colors",children:"Toggle Theme"}),a.jsxs("div",{className:"text-xs opacity-60 mt-1",children:["Renders: ",s]})]})}),w=t.memo(()=>{const r=i(),s=c("var(--color-bg-primary)","var(--color-bg-primary)"),o=c("var(--color-text-primary)","var(--color-text-primary)"),[n,l]=t.useState(0);return e.useEffect(()=>{l(e=>e+1)}),a.jsxs("div",{className:`p-3 rounded border transition-colors ${r}`,style:{backgroundColor:s,color:o},children:[a.jsx("div",{className:"text-sm font-medium",children:"Themed Box"}),a.jsxs("div",{className:"text-xs opacity-60",children:["Renders: ",n]})]})}),N=t.memo(()=>{const[r,s]=t.useState(0);return e.useEffect(()=>{s(e=>e+1)}),a.jsxs("div",{className:"p-2 bg-gray-50 rounded border",children:[a.jsx("div",{className:"text-sm font-medium",children:"Static Component"}),a.jsxs("div",{className:"text-xs opacity-60",children:["Renders: ",r," (should stay at 1)"]})]})}),k=t.memo(()=>{const[r,s]=t.useState(0),[o,n]=t.useState(0);e.useEffect(()=>{n(e=>e+1)});const l=t.useCallback(()=>{s(e=>e+1)},[]);return a.jsxs("div",{className:"max-w-4xl mx-auto p-6 space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Theme Performance Demo"}),a.jsx("p",{className:"text-gray-600 mb-4",children:"This demo shows how different components re-render when theme changes. Components should only re-render when their specific theme dependencies change."}),a.jsxs("div",{className:"text-sm opacity-60",children:["Demo Container Renders: ",o]})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[a.jsx(v,{}),a.jsx(y,{}),a.jsx(j,{}),a.jsx(w,{}),a.jsx(N,{}),a.jsxs("div",{className:"p-2 border rounded",children:[a.jsxs("button",{onClick:l,className:"px-3 py-1 bg-green-500 text-white rounded hover:bg-green-600 transition-colors mb-2",children:["Local State: ",r]}),a.jsx("div",{className:"text-xs opacity-60",children:"Click to test local re-renders"})]})]}),a.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[a.jsx("h3",{className:"font-semibold mb-2",children:"Performance Notes:"}),a.jsxs("ul",{className:"text-sm space-y-1 list-disc list-inside",children:[a.jsx("li",{children:"DarkModeIndicator only re-renders when light/dark changes"}),a.jsx("li",{children:"ThemeNameDisplay re-renders when theme name changes"}),a.jsx("li",{children:"ThemeToggleButton should never re-render (only has toggle function)"}),a.jsx("li",{children:"ThemedBox re-renders when actual theme changes"}),a.jsx("li",{children:"StaticComponent should never re-render after initial mount"}),a.jsx("li",{children:"Local state changes should not affect theme-related components"})]})]})]})});v.displayName="DarkModeIndicator",y.displayName="ThemeNameDisplay",j.displayName="ThemeToggleButton",w.displayName="ThemedBox",N.displayName="StaticComponent",k.displayName="ThemePerformanceDemo";const T=Object.freeze(Object.defineProperty({__proto__:null,default:k},Symbol.toStringTag,{value:"Module"}));export{b as T,g as a,f as b,T as c};
